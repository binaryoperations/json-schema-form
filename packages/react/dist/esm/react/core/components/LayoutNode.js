import { jsx as _jsx, Fragment as _Fragment } from "react/jsx-runtime";
import { shallowCompare } from '../../../core/internals/object';
import { memo } from 'react';
import { useStore } from '../hooks';
import { useLayoutNode } from '../hooks/useRenderer';
import { ControlNode } from './ControlNode';
export const LayoutNode = function LayoutNode(props) {
    const [{ nodeType, breakpoints }] = useStore((store) => {
        const node = store.uiContext.getNode(props.id);
        return { nodeType: node.type, breakpoints: node.breakpoints };
    }, shallowCompare);
    const LayoutNode = useLayoutNode(nodeType);
    return _jsx(LayoutNode, { id: props.id, breakpoints: breakpoints });
};
export const LayoutChildren = memo(function LayoutChildren(props) {
    const [isControl] = useStore((store) => store.uiContext.isControl(props.id));
    const [nodes] = useStore((store) => {
        if (isControl)
            return [];
        return store.uiContext.getChildren(props.id);
    }, shallowCompare);
    if (isControl) {
        return _jsx(ControlNode, { id: props.id });
    }
    const renderedNodes = nodes.map((node) => {
        return _jsx(LayoutNode, { id: node }, node);
    });
    return _jsx(_Fragment, { children: renderedNodes });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGF5b3V0Tm9kZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL2NvcmUvY29tcG9uZW50cy9MYXlvdXROb2RlLnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG9EQUFvRCxDQUFDO0FBQ3BGLE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSxPQUFPLENBQUM7QUFFN0IsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUNwQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDckQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU1QyxNQUFNLENBQUMsTUFBTSxVQUFVLEdBQUcsU0FBUyxVQUFVLENBQUMsS0FBcUI7SUFDakUsTUFBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLFdBQVcsRUFBRSxDQUFDLEdBQUcsUUFBUSxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDckQsTUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQy9DLE9BQU8sRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ2hFLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQztJQUNuQixNQUFNLFVBQVUsR0FBRyxhQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFFM0MsT0FBTyxLQUFDLFVBQVUsSUFBQyxFQUFFLEVBQUUsS0FBSyxDQUFDLEVBQUUsRUFBRSxXQUFXLEVBQUUsV0FBVyxHQUFJLENBQUM7QUFDaEUsQ0FBQyxDQUFDO0FBRUYsTUFBTSxDQUFDLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLGNBQWMsQ0FBQyxLQUUxRDtJQUNDLE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzdFLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNqQyxJQUFJLFNBQVM7WUFBRSxPQUFPLEVBQUUsQ0FBQztRQUN6QixPQUFPLEtBQUssQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUMvQyxDQUFDLEVBQUUsY0FBYyxDQUFDLENBQUM7SUFFbkIsSUFBSSxTQUFTLEVBQUU7UUFDYixPQUFPLEtBQUMsV0FBVyxJQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsRUFBRSxHQUFJLENBQUM7S0FDdEM7SUFFRCxNQUFNLGFBQWEsR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFLEVBQUU7UUFDdkMsT0FBTyxLQUFDLFVBQVUsSUFBWSxFQUFFLEVBQUUsSUFBSSxJQUFkLElBQUksQ0FBYyxDQUFDO0lBQzdDLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyw0QkFBRyxhQUFhLEdBQUksQ0FBQztBQUM5QixDQUFDLENBQUMsQ0FBQyJ9