{"version":3,"file":"ActiveStateContext.js","sources":["../../../../../../context/ActiveStateContext/ActiveStateContext.ts"],"sourcesContent":["import { useCallback } from 'react';\n\nimport useSafeCallback from '#core/hooks/useSafeCallback';\n\nimport { createFastContext } from '../../core/fast-context';\nimport { ActiveStateType } from './types';\n\nconst ActiveStateContext = createFastContext<ActiveStateType>(true);\n\nexport const ActiveStateProvider = ActiveStateContext.Provider;\nexport const useActiveStateValue = ActiveStateContext.useContextValue;\n\nexport function useActiveStateChange<T>() {\n  const { set } = ActiveStateContext.useStoreRef();\n\n  return useCallback(\n    (id: T) => {\n      set((previous: ActiveStateType) => {\n        switch (true) {\n          case !previous.multiple:\n            return { activeState: [id] };\n          case previous.activeState.includes(id):\n            return {\n              activeState: previous.activeState.filter((x) => x !== id),\n            };\n          default:\n            return {\n              activeState: [...previous.activeState, id],\n            };\n        }\n      });\n    },\n    [set]\n  );\n}\n\nexport function useIsActive<T>(id: T) {\n  return useActiveStateValue((state) => state.activeState.includes(id));\n}\n\nexport function useActiveState<T>(id: T) {\n  const isActive = useIsActive(id);\n  const onActivate = useActiveStateChange<T>();\n  return [isActive, useSafeCallback(() => onActivate(id))] as const;\n}\n"],"names":["ActiveStateContext","createFastContext","useActiveStateValue","useActiveStateChange","set","useCallback","id","previous","x","useIsActive","state","useActiveState","isActive","onActivate","useSafeCallback"],"mappings":"0QAOMA,EAAqBC,EAAAA,kBAAmC,EAAI,EAGrDC,EAAsBF,EAAmB,yBAEtCG,GAAoB,CAClC,KAAM,CAAE,IAAAC,CAAA,EAAQJ,EAAmB,cAE5B,OAAAK,EAAAA,aAAAA,YACJC,GAAS,CACRF,EAAKG,GAA6B,CAChC,OAAQ,GAAM,CACZ,IAAK,CAACA,EAAS,SACb,MAAO,CAAE,YAAa,CAACD,CAAE,GAC3B,KAAKC,EAAS,YAAY,SAASD,CAAE,EAC5B,MAAA,CACL,YAAaC,EAAS,YAAY,OAAQC,GAAMA,IAAMF,CAAE,CAAA,EAE5D,QACS,MAAA,CACL,YAAa,CAAC,GAAGC,EAAS,YAAaD,CAAE,CAAA,CAE9C,CAAA,CACF,CAAA,EAEH,CAACF,CAAG,CAAC,CAET,CAEM,SAAUK,EAAeH,EAAK,CAClC,OAAOJ,EAAqBQ,GAAUA,EAAM,YAAY,SAASJ,CAAE,CAAC,CACtE,CAEM,SAAUK,EAAkBL,EAAK,CAC/B,MAAAM,EAAWH,EAAYH,CAAE,EACzBO,EAAaV,IACnB,MAAO,CAACS,EAAUE,EAAA,gBAAgB,IAAMD,EAAWP,CAAE,CAAC,CAAC,CACzD"}