"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const m=require("../../../../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-runtime.js"),C=require("../../../internals/object.js"),s=require("../../../../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js"),v=require("../../../../node_modules/.pnpm/use-sync-external-store@1.2.2_react@18.3.1/node_modules/use-sync-external-store/with-selector.js"),d=require("../hooks/useInvariantContext.js"),R=require("../hooks/useLatest.js"),w=require("../hooks/usePrevious.js"),j=(t,n,c=!1)=>{const e=s.reactExports.useRef(t),o=s.reactExports.useRef(c),r=s.reactExports.useRef(!1),i=R.useLatest(n),f=s.reactExports.useCallback(()=>e.current,[e]),x=s.reactExports.useRef(new Set),u=s.reactExports.useCallback(a=>{e.current={...e.current,...a(e.current)},!r.current&&i.current?i.current(e.current):x.current.forEach(h=>h()),r.current=!1},[e,i]),p=s.reactExports.useCallback(a=>(x.current.add(a),()=>x.current.delete(a)),[]);return s.reactExports.useEffect(()=>{o.current&&(r.current=!0,u(()=>t))},[u,e,t]),w.usePrevious(t).current!==t&&o.current&&(e.current={...e.current,...t}),s.reactExports.useMemo(()=>({get:f,set:u,subscribe:p,store:e}),[f,u,p])};let q=0;const P=t=>{const{watch:n=!1,debugName:c=`fast-context-${++q}`}=typeof t!="object"?{watch:t}:t,e=s.reactExports.createContext(null);return e.displayName=c,{useStoreRef:E(e),Provider:b(e,n),useContext:(o,r=C.shallowCompare)=>l(e,o,r),useContextValue:(o,r=C.shallowCompare)=>S(e,o,r),Context:e}},b=(t,n)=>Object.assign(s.reactExports.memo(function({value:e,children:o,onChange:r}){return m.jsxRuntimeExports.jsx(t.Provider,{value:j(e,r,n),children:o})}),{displayName:t.displayName}),E=t=>()=>d.useInvariantContext(t,"Fast Context requires the value to be wrapped in a Provider with a value."),l=(t,n,c=Object.is)=>{const e=d.useInvariantContext(t,"Store not found");return[v.withSelectorExports.useSyncExternalStoreWithSelector(e.subscribe,()=>e.get(),void 0,r=>n(r),c),e.set]},S=(t,n,c=Object.is)=>l(t,n,c)[0];exports.createFastContext=P;exports.createProvider=b;exports.createUseRefContext=E;exports.useFastContextStore=l;exports.useStoreValue=S;
//# sourceMappingURL=index.js.map
